<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paint Messenger</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
</head>
<body>
    <div class="app">
        <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
        <div class="toolbar">
            <div class="tool-group">
                <button id="brushBtn" class="tool-btn active" title="–ö–∏—Å—Ç—å">üñåÔ∏è</button>
                <button id="lineBtn" class="tool-btn" title="–õ–∏–Ω–∏—è">üìè</button>
                <button id="rectBtn" class="tool-btn" title="–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫">‚¨ú</button>
                <button id="circleBtn" class="tool-btn" title="–ö—Ä—É–≥">‚≠ï</button>
                <button id="textBtn" class="tool-btn" title="–¢–µ–∫—Å—Ç">üìù</button>
                <button id="eraserBtn" class="tool-btn" title="–õ–∞—Å—Ç–∏–∫">üßπ</button>
            </div>
            
            <div class="tool-group">
                <input type="color" id="colorPicker" value="#000000" title="–¶–≤–µ—Ç">
                <input type="range" id="brushSize" min="1" max="50" value="5" title="–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏">
                <select id="brushType" title="–¢–∏–ø –∫–∏—Å—Ç–∏">
                    <option value="round">–ö—Ä—É–≥–ª–∞—è</option>
                    <option value="square">–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è</option>
                    <option value="dashed">–ü—É–Ω–∫—Ç–∏—Ä</option>
                </select>
            </div>

            <div class="tool-group">
                <button id="undoBtn" title="–û—Ç–º–µ–Ω–∏—Ç—å">‚Ü©Ô∏è</button>
                <button id="redoBtn" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å">‚Ü™Ô∏è</button>
                <button id="clearBtn" title="–û—á–∏—Å—Ç–∏—Ç—å">üóëÔ∏è</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="controls">
            <div class="control-group">
                <button id="toggleLayers">üìö –°–ª–æ–∏</button>
                <button id="toggleTemplates">üé® –®–∞–±–ª–æ–Ω—ã</button>
                <button id="toggleCollab">üë• –°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞</button>
            </div>

            <div class="control-group">
                <select id="backgroundSelect">
                    <option value="transparent">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω</option>
                    <option value="white">–ë–µ–ª—ã–π —Ñ–æ–Ω</option>
                    <option value="grid">–°–µ—Ç–∫–∞</option>
                    <option value="lined">–õ–∏–Ω–æ–≤–∫–∞</option>
                    <option value="graph">–ú–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤–∫–∞</option>
                </select>
                <button id="customBgBtn">üñºÔ∏è –°–≤–æ–π —Ñ–æ–Ω</button>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —Å–ª–æ–µ–≤ -->
        <div id="layersPanel" class="panel layers-panel">
            <div class="panel-header">
                <h4>–°–ª–æ–∏</h4>
                <div>
                    <button id="addLayer">+</button>
                    <button id="mergeLayers">üîÑ</button>
                    <button id="closeLayers">‚úï</button>
                </div>
            </div>
            <div id="layersList" class="layers-list"></div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —à–∞–±–ª–æ–Ω–æ–≤ -->
        <div id="templatesPanel" class="panel templates-panel">
            <div class="panel-header">
                <h4>–®–∞–±–ª–æ–Ω—ã</h4>
                <button id="closeTemplates">‚úï</button>
            </div>
            <div class="templates-grid">
                <div class="template-item" data-template="comic">
                    <div class="template-preview">ü¶∏</div>
                    <span>–ö–æ–º–∏–∫—Å</span>
                </div>
                <div class="template-item" data-template="storyboard">
                    <div class="template-preview">üé¨</div>
                    <span>–†–∞—Å–∫–∞–¥—Ä–æ–≤–∫–∞</span>
                </div>
                <div class="template-item" data-template="mindmap">
                    <div class="template-preview">üß†</div>
                    <span>–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞</span>
                </div>
                <div class="template-item" data-template="ui">
                    <div class="template-preview">üì±</div>
                    <span>UI –º–∞–∫–µ—Ç</span>
                </div>
                <div class="template-item" data-template="flowchart">
                    <div class="template-preview">üìä</div>
                    <span>–ë–ª–æ–∫-—Å—Ö–µ–º–∞</span>
                </div>
                <div class="template-item" data-template="sketch">
                    <div class="template-preview">‚úèÔ∏è</div>
                    <span>–≠—Å–∫–∏–∑</span>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã -->
        <div id="collabPanel" class="panel collab-panel">
            <div class="panel-header">
                <h4>–°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h4>
                <button id="closeCollab">‚úï</button>
            </div>
            <div class="collab-content">
                <button id="startCollab">üéÆ –ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
                <div class="join-section">
                    <input type="text" id="sessionId" placeholder="ID —Å–µ—Å—Å–∏–∏">
                    <button id="joinCollab">‚úÖ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                </div>
                <div id="usersList" class="users-list"></div>
                <div class="collab-status" id="collabStatus">–ù–µ–∞–∫—Ç–∏–≤–Ω–æ</div>
            </div>
        </div>

        <!-- –•–æ–ª—Å—Ç -->
        <canvas id="paintCanvas"></canvas>

        <!-- –ü–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
        <div class="save-panel">
            <button id="savePNG">üíæ PNG</button>
            <button id="saveJPG">üñºÔ∏è JPG</button>
            <button id="copyClipboard">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <button id="shareBtn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>